import{Ea as c,Jb as l,L as a,O as i,T as n,j as o}from"./chunk-XZU32RY2.js";var S=(()=>{class e{constructor(t){this.http=t,this.tokenKey="slx_token",this.userKey="slx_user",this.userSubject=new o(null),this.user$=this.userSubject.asObservable(),this.isAuthenticated=c(!1);let s=localStorage.getItem(this.tokenKey),r=localStorage.getItem(this.userKey);if(s&&r)try{let h=JSON.parse(r);this.userSubject.next(h),this.isAuthenticated.set(!0)}catch{this.clearSession()}}get userValue(){return this.userSubject.value}get token(){return localStorage.getItem(this.tokenKey)}login(t,s){return this.http.post("/auth/login",{email:t,password:s}).pipe(a(r=>{localStorage.setItem(this.tokenKey,r.token),localStorage.setItem(this.userKey,JSON.stringify(r.user)),this.userSubject.next(r.user),this.isAuthenticated.set(!0)}))}logout(){this.clearSession()}clearSession(){localStorage.removeItem(this.tokenKey),localStorage.removeItem(this.userKey),this.userSubject.next(null),this.isAuthenticated.set(!1)}static{this.\u0275fac=function(s){return new(s||e)(n(l))}}static{this.\u0275prov=i({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var d=(()=>{class e{constructor(){this.key="slx_theme"}initTheme(){let t=localStorage.getItem(this.key)??"light";this.applyTheme(t)}toggleTheme(){let t=document.documentElement.dataset.theme==="dark"?"light":"dark";this.applyTheme(t)}applyTheme(t){document.documentElement.dataset.theme=t,localStorage.setItem(this.key,t)}static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275prov=i({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();export{S as a,d as b};
