import{a as A,b as I}from"./chunk-TNFIVIDD.js";import{a as M,b as R}from"./chunk-7DQOHWYX.js";import{$a as S,J as y,Ja as d,K as h,La as s,Na as a,Oa as t,Pa as p,Qa as _,Ra as w,Sa as m,Wa as r,X as x,Xa as b,Ya as C,ea as u,fa as v,i as f,va as o,vb as E,wa as l,wb as O}from"./chunk-SFTGCUHE.js";function T(n,g){if(n&1&&(a(0,"div",9)(1,"span"),r(2),t(),a(3,"strong"),r(4),t()()),n&2){let e=g.$implicit;o(2),b(e.label),o(2),C("",e.value,"%")}}function P(n,g){if(n&1){let e=_();a(0,"section",1)(1,"header",2)(2,"div")(3,"h1"),r(4,"Analytics"),t(),a(5,"p"),r(6,"Trendlines across traffic, newsletters, and voucher conversions."),t()(),a(7,"app-date-range-selector",3),w("select",function(c){u(e);let D=m();return v(D.setRange(c))}),t()(),a(8,"section",4)(9,"div",5)(10,"h3"),r(11,"Traffic Trend"),t(),p(12,"app-mini-line-chart",6),t(),a(13,"div",5)(14,"h3"),r(15,"Newsletter Performance"),t(),p(16,"app-mini-line-chart",6),t(),a(17,"div",5)(18,"h3"),r(19,"Voucher Conversions"),t(),p(20,"app-mini-line-chart",6),t()(),a(21,"section",7)(22,"h3"),r(23,"Breakdown by Category"),t(),d(24,T,5,2,"div",8),t()()}if(n&2){let e=m();o(7),s("options",e.ranges)("selected",e.selectedRange),o(5),s("points",e.analytics.traffic),o(4),s("points",e.analytics.newsletter),o(4),s("points",e.analytics.vouchers),o(4),s("ngForOf",e.analytics.breakdown)}}var k=(()=>{class n{constructor(e,i){this.api=e,this.state=i,this.destroy$=new f,this.ranges=this.getRanges(),this.selectedRange=this.ranges[0]}ngOnInit(){this.state.dateRange$.pipe(y(e=>(this.selectedRange=e,this.api.getAnalytics(e.from,e.to))),h(this.destroy$)).subscribe(e=>this.analytics=e)}setRange(e){this.state.setDateRange(e)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getRanges(){let e=new Date;return[7,30,90].map(i=>{let c=new Date;return c.setDate(e.getDate()-i),{label:`Last ${i} days`,from:c.toISOString(),to:e.toISOString()}})}static{this.\u0275fac=function(i){return new(i||n)(l(M),l(R))}}static{this.\u0275cmp=x({type:n,selectors:[["app-analytics"]],standalone:!0,features:[S],decls:1,vars:1,consts:[["class","analytics",4,"ngIf"],[1,"analytics"],[1,"header"],[3,"select","options","selected"],[1,"charts"],[1,"panel"],[3,"points"],[1,"panel","breakdown"],["class","breakdown-row",4,"ngFor","ngForOf"],[1,"breakdown-row"]],template:function(i,c){i&1&&d(0,P,25,6,"section",0),i&2&&s("ngIf",c.analytics)},dependencies:[E,O,A,I],styles:[".analytics[_ngcontent-%COMP%]{display:grid;gap:24px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:16px;flex-wrap:wrap}.charts[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px}.panel[_ngcontent-%COMP%]{background:var(--surface-strong);border-radius:20px;padding:16px;border:1px solid var(--border)}.breakdown[_ngcontent-%COMP%]{display:grid;gap:10px}.breakdown-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px dashed var(--border)}.breakdown-row[_ngcontent-%COMP%]:last-child{border-bottom:none}"]})}}return n})();var q=[{path:"",component:k}];export{q as ANALYTICS_ROUTES};
