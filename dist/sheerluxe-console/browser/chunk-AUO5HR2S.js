import{a as M,b as P}from"./chunk-TNFIVIDD.js";import{a as D,b as E}from"./chunk-7DQOHWYX.js";import{$a as v,J as m,Ja as c,K as g,L as _,La as p,Na as t,Oa as n,Pa as h,Ra as C,Sa as b,Wa as a,X as f,Xa as d,i as x,va as s,vb as S,wa as y,wb as O}from"./chunk-SFTGCUHE.js";function $(i,l){if(i&1&&(t(0,"span",4),a(1),n()),i&2){let e=b();s(),d(e.data.delta)}}var k=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=f({type:i,selectors:[["app-kpi-card"]],inputs:{data:"data"},standalone:!0,features:[v],decls:6,vars:3,consts:[[1,"kpi"],[1,"label"],[1,"value"],["class","delta",4,"ngIf"],[1,"delta"]],template:function(o,r){o&1&&(t(0,"article",0)(1,"p",1),a(2),n(),t(3,"div",2),a(4),n(),c(5,$,2,1,"span",3),n()),o&2&&(s(2),d(r.data.label),s(2),d(r.data.value),s(),p("ngIf",r.data.delta))},dependencies:[O],styles:[".kpi[_ngcontent-%COMP%]{padding:18px;border-radius:16px;background:var(--surface-strong);border:1px solid var(--border);display:grid;gap:8px}",".label[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.85rem}",".value[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:600}",".delta[_ngcontent-%COMP%]{color:var(--success);font-weight:600;font-size:.85rem}"]})}}return i})();function F(i,l){if(i&1&&h(0,"app-kpi-card",13),i&2){let e=l.$implicit;p("data",e)}}function A(i,l){if(i&1&&(t(0,"div",14),h(1,"div",15),t(2,"div")(3,"p"),a(4),n(),t(5,"span"),a(6),n()()()),i&2){let e=l.$implicit;s(4),d(e.message),s(2),d(e.time)}}var R=(()=>{class i{constructor(e,o){this.api=e,this.state=o,this.destroy$=new x,this.kpis=[],this.activity=[],this.chartPoints=[],this.ranges=this.getRanges(),this.selectedRange=this.ranges[0]}ngOnInit(){this.state.dateRange$.pipe(_(e=>this.selectedRange=e),m(e=>this.api.getKpis(e.from,e.to)),g(this.destroy$)).subscribe(e=>this.kpis=e),this.state.dateRange$.pipe(m(e=>this.api.getActivity(e.from,e.to)),g(this.destroy$)).subscribe(e=>this.activity=e),this.state.dateRange$.pipe(m(e=>this.api.getAnalytics(e.from,e.to)),g(this.destroy$)).subscribe(e=>this.chartPoints=e.traffic)}setRange(e){this.state.setDateRange(e)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getRanges(){let e=new Date;return[7,30,90].map(r=>{let u=new Date;return u.setDate(e.getDate()-r),{label:`Last ${r} days`,from:u.toISOString(),to:e.toISOString()}})}static{this.\u0275fac=function(o){return new(o||i)(y(D),y(E))}}static{this.\u0275cmp=f({type:i,selectors:[["app-dashboard"]],standalone:!0,features:[v],decls:31,vars:5,consts:[[1,"dashboard"],[1,"header"],[3,"select","options","selected"],[1,"kpis"],[3,"data",4,"ngFor","ngForOf"],[1,"grid"],[1,"panel"],[1,"panel-header"],[1,"muted"],[3,"points"],[1,"legend"],[1,"activity"],["class","activity-item",4,"ngFor","ngForOf"],[3,"data"],[1,"activity-item"],[1,"dot"]],template:function(o,r){o&1&&(t(0,"section",0)(1,"header",1)(2,"div")(3,"h1"),a(4,"Dashboard"),n(),t(5,"p"),a(6,"Morning pulse across editorial + commerce performance."),n()(),t(7,"app-date-range-selector",2),C("select",function(w){return r.setRange(w)}),n()(),t(8,"section",3),c(9,F,1,1,"app-kpi-card",4),n(),t(10,"section",5)(11,"div",6)(12,"div",7)(13,"h3"),a(14,"Traffic Pulse"),n(),t(15,"span",8),a(16,"Sessions"),n()(),h(17,"app-mini-line-chart",9),t(18,"div",10)(19,"span"),a(20,"Peak around Wednesday"),n(),t(21,"strong"),a(22,"+12%"),n()()(),t(23,"div",6)(24,"div",7)(25,"h3"),a(26,"Recent Activity"),n(),t(27,"span",8),a(28,"Last 48 hours"),n()(),t(29,"div",11),c(30,A,7,2,"div",12),n()()()()),o&2&&(s(7),p("options",r.ranges)("selected",r.selectedRange),s(2),p("ngForOf",r.kpis),s(8),p("points",r.chartPoints),s(13),p("ngForOf",r.activity))},dependencies:[S,k,M,P],styles:[".dashboard[_ngcontent-%COMP%]{display:grid;gap:24px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:16px}h1[_ngcontent-%COMP%]{margin:0;font-size:1.8rem}p[_ngcontent-%COMP%]{margin:4px 0 0;color:var(--text-secondary)}.kpis[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px}.panel[_ngcontent-%COMP%]{background:var(--surface-strong);border:1px solid var(--border);border-radius:20px;padding:18px;display:grid;gap:16px}.panel-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.muted[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.85rem}.legend[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;color:var(--text-secondary);font-size:.85rem}.activity[_ngcontent-%COMP%]{display:grid;gap:12px}.activity-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:12px 1fr;gap:12px;align-items:center}.activity-item[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:999px;background:var(--accent)}.activity-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.8rem}"]})}}return i})();var J=[{path:"",component:R}];export{J as DASHBOARD_ROUTES};
